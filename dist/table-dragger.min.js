module.exports=function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=7)}([function(e,n){e.exports=require("@babel/runtime/helpers/classCallCheck")},function(e,n){e.exports=require("@babel/runtime/helpers/createClass")},function(e,n){e.exports=require("crossvent")},function(e,n){e.exports=require("@babel/runtime/helpers/typeof")},function(e,n){e.exports=require("dragula-with-animation")},function(e,n,t){(e.exports=t(6)(!1)).push([e.i,".sindu_dragger {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n  box-sizing: border-box;\n}\n\n.sindu_handle {\n  cursor: move;\n}\n\n.sindu_dragger li {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  text-align: inherit;\n}\n\n.sindu_dragger li table, .sindu_dragger tr, .sindu_dragger th, .sindu_dragger td {\n  box-sizing: border-box;\n}\n\n.gu-mirror {\n  list-style: none;\n}\n\n.sindu_dragger.sindu_column li {\n  float: left;\n}\n\n.sindu_dragging .sindu_origin_table {\n  visibility: hidden;\n}\n\n.gu-mirror {\n  position: fixed !important;\n  margin: 0 !important;\n  z-index: 9999 !important;\n  opacity: 0.8;\n}\n\n.gu-mirror li {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  text-align: inherit;\n}\n\n.gu-mirror li table, .gu-mirror tr, .gu-mirror th, .gu-mirror td {\n  box-sizing: border-box;\n}\n\n.gu-hide {\n  display: none !important;\n}\n\n.gu-unselectable {\n  -webkit-user-select: none !important;\n  -moz-user-select: none !important;\n  -ms-user-select: none !important;\n  user-select: none !important;\n}\n\n.gu-transit {\n  opacity: 0.5;\n}\n",""])},function(e,n){e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var t=function(e,n){var t=e[1]||"",r=e[3];if(!r)return t;if(n&&"function"==typeof btoa){var o=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),i=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[t].concat(i).concat([o]).join("\n")}return[t].join("\n")}(n,e);return n[2]?"@media "+n[2]+"{"+t+"}":t}).join("")},n.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&r[a[0]]||(t&&!a[2]?a[2]=t:t&&(a[2]="("+a[2]+") and ("+t+")"),n.push(a))}},n}},function(e,n,t){"use strict";t.r(n);t(5);var r,o,i=t(3),a=t.n(i),l=t(0),u=t.n(l),d=t(1),s=t.n(d),c=t(4),h=t.n(c),f={originTable:"sindu_origin_table",draggableTable:"sindu_dragger",dragging:"sindu_dragging",static:"sindu_static",handle:"sindu_handle"},g=t(2),m=t.n(g),p=window,v={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},y={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},b=function(e,n,t,r){p.navigator.pointerEnabled?m.a[n](e,y[t],r):(m.a[n](e,v[t],r),m.a[n](e,t,r))},w=function(e){var n=e.rows[0];return Array.from(e.rows).forEach(function(e){var t=e.children.length,r=n.children.length;n=t>r?e:n}),n},x=function(e,n){return Object.keys(n).forEach(function(t){e.style[t]=n[t]}),e},E=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},T=function(e){var n=e.target,t=e.origin;n&&t.parentNode.insertBefore(n,t)},C=function(e){var n=e.list,t=e.from,r=e.to,o=e.parent;t<r?function(e){var n=e.target,t=e.origin,r=e.parent;n&&(r||n.parentNode).insertBefore(n,t?t.nextElementSibling:null)}({target:n[t],origin:n[r],parent:o}):T({target:n[t],origin:n[r]})},k=function(){function e(n){var t=this,i=n.originTable,a=n.mode;u()(this,e);var l=i.dragger,d=i.cellIndex,s=i.el,c=i.options,g=this.fakeTables=function(e,n){return"column"===n?function(e){return Array.from(w(e).children).map(function(n,t){return function(e,n){var t=e.cloneNode(!0);A(t);var r=t.querySelectorAll("col");r.length&&Array.from(r).forEach(function(e,t){t!==n&&e.parentElement.removeChild(e)});return Array.from(t.rows).forEach(function(e){var t=e.children[n];E(e),t&&e.appendChild(t)}),t}(e,t)})}(e):function(e){return Array.from(e.rows).map(function(n){var t=e.cloneNode(!0);A(t),Array.from(t.children).forEach(function(e){var n=e.nodeName;"COL"!==n&&"COLGROUP"!==n&&t.removeChild(e)});var r=n.parentNode.cloneNode();return r.innerHTML="",r.appendChild(n.cloneNode(!0)),t.appendChild(r),t})}(e)}(s,a);r=parseInt(document.body.style.paddingRight,0)||0,o=document.body.style.overflow,this.options=c,this.mode=a,this.originTable=i,this.dragger=l,this.index="column"===a?d.x:d.y,["destroy","onDrag","onDragend","onShadow","onOut"].forEach(function(e){t[e]=t[e].bind(t)}),this.el=g.reduce(function(e,n){var t=document.createElement("li");return t.appendChild(n),e.appendChild(t)&&e},document.createElement("ul")),this.drake=h()([this.el],{animation:300,staticClass:f.static,direction:"column"===a?"horizontal":"vertical"}).on("drag",this.onDrag).on("dragend",this.onDragend).on("shadow",this.onShadow).on("out",this.onOut),this.renderEl(),this.dispatchMousedown()}return s()(e,[{key:"onDrag",value:function(){x(document.body,{overflow:"hidden"});var e=function(){if(document.documentElement.scrollHeight<=document.documentElement.clientHeight)return 0;var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.appendChild(e),document.body.appendChild(n);var t=e.offsetWidth;n.style.overflow="scroll";var r=e.offsetWidth;return t===r&&(r=n.clientWidth),document.body.removeChild(n),t-r}();this.dragger.dragging=!0,e&&x(document.body,{"padding-right":"".concat(e+r,"px")}),b(document,"remove","mouseup",this.destroy),this.dragger.emit("drag",this.originTable.el,this.options.mode)}},{key:"onDragend",value:function(e){var n=this.originTable.el,t=this.dragger,i=this.index,a=this.mode,l=this.el;x(document.body,{overflow:o,"padding-right":"".concat(r,"px")}),this.dragger.dragging=!1;var u=i,d=Array.from(l.children).indexOf(e);this.destroy(),t.emit("drop",u,d,n,a)}},{key:"onShadow",value:function(e){var n=this.originTable.el,t=this.dragger,r=this.index,o=this.el,i=this.mode,a=r,l=Array.from(o.children).indexOf(e);t.emit("shadowMove",a,l,n,i)}},{key:"onOut",value:function(){this.dragger.dragging=!1,this.dragger.emit("out",this.originTable.el,this.mode)}},{key:"destroy",value:function(){var e=this;!function(e,n,t){e.removeEventListener(n,t)}(document,"mouseup",this.destroy),this.el.parentElement.classList.remove(f.dragging),this.el.parentElement.removeChild(this.el),setTimeout(function(){e.drake.destroy()},0)}},{key:"dispatchMousedown",value:function(){var e=this.el,n=this.index;e.children[n].dispatchEvent(function(){var e;return p.navigator.pointerEnabled&&(document.createEvent?(e=document.createEvent("PointerEvent")).initMouseEvent("pointerdown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null):e=new PointerEvent("pointerdown",{cancelable:!0,bubbles:!0,view:window})),document.createEvent?(e=document.createEvent("MouseEvent")).initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null):e=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0}),e}())}},{key:"renderEl",value:function(){var e=this,n=this.mode,t=this.el,r=this.originTable.el;this.sizeFakes(),x(t,{position:"absolute",top:"".concat(r.offsetTop,"px"),left:"".concat(r.offsetLeft,"px")}),T({target:t,origin:r});var o=window.getComputedStyle(r).getPropertyValue("border-spacing").split(" ")[0],i="column"===n?"margin-right":"margin-bottom",a=t.children.length;Array.from(t.children).forEach(function(t,r){var l=t&&t.querySelector("table");e.options.onlyBody&&"row"===n&&!Array.from(l.children).some(function(e){return"TBODY"===e.nodeName})&&t.classList.add(f.static),o&&r<a-1&&(t.style[i]="-".concat(o))}),t.parentElement.classList.add(f.dragging),t.classList.add(f.draggableTable),t.classList.add("sindu_".concat(n))}},{key:"sizeFakes",value:function(){return"column"===this.mode?this.sizeColumnFake():this.sizeRowFake()}},{key:"sizeColumnFake",value:function(){var e=this.fakeTables,n=this.originTable.el;Array.from(w(n).children).forEach(function(n,t){var r=n.getBoundingClientRect().width,o=e[t];x(o,{width:"".concat(r,"px")}),x(o.rows[0].children[0],{width:"".concat(r,"px")})});var t=Array.from(n.rows).map(function(e){return e.children[0].getBoundingClientRect().height});e.forEach(function(e){Array.from(e.rows).forEach(function(e,n){x(e,{height:"".concat(t[n],"px")})})})}},{key:"sizeRowFake",value:function(){var e=this.fakeTables,n=this.originTable.el,t=w(n).children,r=n.getBoundingClientRect().width;e.forEach(function(e){x(e,{width:"".concat(r,"px")}),Array.from(e.rows[0].children).forEach(function(e,n){x(e,{width:"".concat(t[n].getBoundingClientRect().width,"px")})})})}}]),e}();function A(e){x(e,{"table-layout":"fixed",width:"initial",height:"initial",padding:0,margin:0}),["width","height","id"].forEach(function(n){e.removeAttribute(n)}),e.classList.remove(f.originTable),Array.from(e.querySelectorAll("col")).forEach(function(e){e.removeAttribute("width"),x(e,{width:"initial"})})}var S=function(){function e(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(u()(this,e),!function(e){return e&&"object"===a()(e)&&"nodeType"in e&&1===e.nodeType&&e.cloneNode&&"TABLE"===e.nodeName}(t))throw new TypeError("table-dragger: el must be TABLE HTMLElement, not ".concat({}.toString.call(t)));if(t.rows.length){var o,i=this.options=Object.assign({},{mode:"column",dragHandler:"",onlyBody:!1,animation:300},r),l=i.mode;if("free"===l&&!i.dragHandler)throw new Error("table-dragger: please specify dragHandler in free mode");if(["onTap","destroy","startBecauseMouseMoved","sortColumn","sortRow"].forEach(function(e){n[e]=n[e].bind(n)}),(this.dragger=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};return e.on=function(t,r){return n[t]=n[t]||[],n[t].push(r),e},e.emit=function(e){if(n[e]){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];var i=!0,a=!1,l=void 0;try{for(var u,d=n[e][Symbol.iterator]();!(i=(u=d.next()).done);i=!0)u.value.apply(void 0,r)}catch(e){a=!0,l=e}finally{try{i||null==d.return||d.return()}finally{if(a)throw l}}}},e}({dragging:!1,destroy:this.destroy})).on("drop",function(e,t,r,o){("column"===o?n.sortColumn:n.sortRow)(e,t)}),i.dragHandler){if((o=t.querySelectorAll(i.dragHandler))&&!o.length)throw new Error("table-dragger: no element match dragHandler selector")}else o="column"===l?t.rows[0]?t.rows[0].children:[]:Array.from(t.rows).map(function(e){return e.children[0]});this.handlers=Array.from(o),this.handlers.forEach(function(e){e.classList.add(f.handle)}),t.classList.add(f.originTable),this.tappedCoord={x:0,y:0},this.cellIndex={x:0,y:0},this.el=t,this.bindEvents()}}return s()(e,[{key:"bindEvents",value:function(){var e=!0,n=!1,t=void 0;try{for(var r,o=this.handlers[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;b(i,"add","mousedown",this.onTap)}}catch(e){n=!0,t=e}finally{try{e||null==o.return||o.return()}finally{if(n)throw t}}}},{key:"onTap",value:function(e){for(var n=this,t=e.target;"TD"!==t.nodeName&&"TH"!==t.nodeName;)t=t.parentElement;!function(e){if("touches"in e)return 1===e.touches.length;if("buttons"in e)return 1===e.buttons;if("button"in e)return 0===e.button;return!1}(e)||e.metaKey||e.ctrlKey||(this.cellIndex={x:t.cellIndex,y:t.parentElement.rowIndex},this.tappedCoord={x:e.clientX,y:e.clientY},this.eventualStart(!1),b(document,"add","mouseup",function(){n.eventualStart(!0)}))}},{key:"startBecauseMouseMoved",value:function(e){var n=this.tappedCoord,t=this.options.mode,r=Math.abs(e.clientX-n.x),o=Math.abs(e.clientY-n.y),i=t;if(0!==r||0!==o){"free"===t&&(i=r<o?"row":"column");var a=new k({mode:i,originTable:this});this.eventualStart(!0),b(document,"add","mouseup",a.destroy)}}},{key:"eventualStart",value:function(e){b(document,e?"remove":"add","mousemove",this.startBecauseMouseMoved)}},{key:"destroy",value:function(){var e=!0,n=!1,t=void 0;try{for(var r,o=this.handlers[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;b(i,"remove","mousedown",this.onTap)}}catch(e){n=!0,t=e}finally{try{e||null==o.return||o.return()}finally{if(n)throw t}}this.el.classList.remove(f.originTable)}},{key:"sortColumn",value:function(e,n){if(e!==n){var t=this.el;Array.from(t.rows).forEach(function(t){C({list:t.children,from:e,to:n})});var r=t.querySelectorAll("col");r.length&&C({list:r,from:e,to:n})}}},{key:"sortRow",value:function(e,n){if(e!==n){var t=this.el,r=Array.from(t.rows);C({list:r,parent:r[n].parentElement,from:e,to:n})}}}],[{key:"create",value:function(n,t){var r=new e(n,t);return r&&r.dragger}},{key:"version",get:function(){return"1.0"}}]),e}();n.default=function(e,n){return S.create(e,n)}}]);